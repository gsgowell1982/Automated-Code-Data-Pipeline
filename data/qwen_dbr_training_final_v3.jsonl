{"sample_id": "ac4f1d28-3bb8-44b3-87af-71c3d88fefdf", "instruction": "åœ¨ç”¨æˆ·ç™»å½•ã€æ³¨å†Œå’Œæ›´æ–°è´¦æˆ·æ—¶ï¼Œå¦‚ä½•ç¡®ä¿è¿”å›çš„é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²å®é™…æ•°æ®åº“ç»“æ„æˆ–ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ï¼Ÿ", "context": {"file_path": "app\\api\\routes\\authentication.py", "related_dbr": "DBR-01", "code_snippet": "# ç™»å½•å¼‚å¸¸å—\ntry:\n    user = await users_repo.get_user_by_email(email=user_login.email)\nexcept EntityDoesNotExist as existence_error:\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.INCORRECT_LOGIN_INPUT,\n    )\n\n# æ³¨å†Œæ£€æŸ¥å—\nif await check_username_is_taken(users_repo, user_create.username):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.USERNAME_TAKEN,\n    )\n\nif await check_email_is_taken(users_repo, user_create.email):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.EMAIL_TAKEN,\n    )\n\n# æ›´æ–°æ ¡éªŒå—\nif user_update.username and user_update.username != current_user.username:\n    if await check_username_is_taken(users_repo, user_update.username):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.USERNAME_TAKEN,\n        )\n\nif user_update.email and user_update.email != current_user.email:\n    if await check_email_is_taken(users_repo, user_update.email):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.EMAIL_TAKEN,\n        )"}, "auto_processing": {"parser": "multilingual_evidence_aligned_parser", "dbr_logic": "DBR-01 Trigger: é˜²æ­¢é€šè¿‡æŠ¥é”™è¿›è¡Œè´¦æˆ·æšä¸¾æ¢æµ‹", "data_cleaning": "Step-placeholder removal, Markdown code normalization"}, "reasoning_trace": ["ç™»å½•æ—¶ï¼Œå¦‚æœç”¨æˆ·åæˆ–é‚®ç®±ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç»Ÿä¸€çš„â€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯â€ã€‚", "æ³¨å†Œæ—¶æ£€æŸ¥ç”¨æˆ·åæˆ–é‚®ç®±æ˜¯å¦å·²å­˜åœ¨ï¼Œå¦‚æœå·²å ç”¨åˆ™è¿”å›ç›¸åº”çš„å ç”¨äº†çš„æç¤ºä¿¡æ¯ã€‚", "æ›´æ–°è´¦æˆ·ä¿¡æ¯æ—¶ï¼Œæ£€æŸ¥æ–°çš„ç”¨æˆ·åå’Œé‚®ç®±æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶è¿”å›ç›¸åº”çš„å ç”¨äº†çš„æç¤ºä¿¡æ¯ã€‚", "è¿™ç§æ¨¡ç³ŠåŒ–å¤„ç†é¿å…äº†ç›´æ¥æš´éœ²æ•°æ®åº“ä¸­çš„çœŸå®é”™è¯¯åŸå› ç»™æ”»å‡»è€…ï¼Œä»è€Œå¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚"], "answer": "### ğŸ’¡ æ¨ç†é“¾ä¸åˆè§„é€»è¾‘\n- ç™»å½•æ—¶ï¼Œå¦‚æœç”¨æˆ·åæˆ–é‚®ç®±ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç»Ÿä¸€çš„â€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯â€ã€‚\n- æ³¨å†Œæ—¶æ£€æŸ¥ç”¨æˆ·åæˆ–é‚®ç®±æ˜¯å¦å·²å­˜åœ¨ï¼Œå¦‚æœå·²å ç”¨åˆ™è¿”å›ç›¸åº”çš„å ç”¨äº†çš„æç¤ºä¿¡æ¯ã€‚\n- æ›´æ–°è´¦æˆ·ä¿¡æ¯æ—¶ï¼Œæ£€æŸ¥æ–°çš„ç”¨æˆ·åå’Œé‚®ç®±æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶è¿”å›ç›¸åº”çš„å ç”¨äº†çš„æç¤ºä¿¡æ¯ã€‚\n- è¿™ç§æ¨¡ç³ŠåŒ–å¤„ç†é¿å…äº†ç›´æ¥æš´éœ²æ•°æ®åº“ä¸­çš„çœŸå®é”™è¯¯åŸå› ç»™æ”»å‡»è€…ï¼Œä»è€Œå¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚\n\n### ğŸ“ ä¸šåŠ¡æ–¹æ¡ˆè§£ç­”\nåœ¨å®ç°èº«ä»½è®¤è¯å¼‚å¸¸æ¨¡ç³ŠåŒ–æ—¶ï¼Œé€šè¿‡ç»Ÿä¸€å¤„ç†é”™è¯¯ä¿¡æ¯å’Œè¿”å›é¢„å®šä¹‰çš„é”™è¯¯æç¤ºï¼ˆå¦‚ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€å·²å­˜åœ¨ç”¨æˆ·åç­‰ï¼‰ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢æ”»å‡»è€…é€šè¿‡é”™è¯¯ä¿¡æ¯æ¥æ¨æ–­ç³»ç»Ÿç»“æ„æˆ–ç”¨æˆ·æ•æ„Ÿæ•°æ®ã€‚è¿™ç§æ–¹å¼ä¸ä»…æå‡äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œè¿˜é¿å…äº†æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚\n\nå…·ä½“æ¥è¯´ï¼Œåœ¨ç™»å½•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¾“å…¥çš„ç”¨æˆ·åæˆ–é‚®ç®±ä¸å­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€è¿”å›â€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯â€è¿™ä¸€æ¨¡ç³ŠåŒ–ä¿¡æ¯ï¼›åœ¨æ³¨å†Œæ—¶æ£€æŸ¥ç”¨æˆ·åå’Œé‚®ç®±æ˜¯å¦å·²è¢«å ç”¨ï¼Œå¹¶åˆ†åˆ«è¿”å›ç›¸åº”çš„å ç”¨äº†çš„ä¿¡æ¯ï¼›åœ¨æ›´æ–°è´¦æˆ·æ—¶åŒæ ·è¿›è¡Œç±»ä¼¼å¤„ç†ã€‚è¿™äº›åšæ³•èƒ½æœ‰æ•ˆå‡å°‘æ³„éœ²æ•æ„Ÿä¿¡æ¯çš„å¯èƒ½æ€§ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“å®‰å…¨æ°´å¹³ã€‚\n\n### ğŸ’» æ ¸å¿ƒæºä»£ç å®ç°\n```python\n# ç™»å½•å¼‚å¸¸å—\ntry:\n    user = await users_repo.get_user_by_email(email=user_login.email)\nexcept EntityDoesNotExist as existence_error:\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.INCORRECT_LOGIN_INPUT,\n    )\n\n# æ³¨å†Œæ£€æŸ¥å—\nif await check_username_is_taken(users_repo, user_create.username):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.USERNAME_TAKEN,\n    )\n\nif await check_email_is_taken(users_repo, user_create.email):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.EMAIL_TAKEN,\n    )\n\n# æ›´æ–°æ ¡éªŒå—\nif user_update.username and user_update.username != current_user.username:\n    if await check_username_is_taken(users_repo, user_update.username):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.USERNAME_TAKEN,\n        )\n\nif user_update.email and user_update.email != current_user.email:\n    if await check_email_is_taken(users_repo, user_update.email):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.EMAIL_TAKEN,\n        )\n```", "data_quality": {"consistency_check": true, "language": "zh-cn", "temperature": 0.7}}
{"sample_id": "fa6f85c6-6b1f-4f56-af14-d257c1ad8421", "instruction": "åœ¨ç”¨æˆ·æ³¨å†Œã€ç™»å½•åŠæ›´æ–°æ“ä½œä¸­ï¼Œå¦‚ä½•ç¡®ä¿ç”¨æˆ·åå’Œé‚®ç®±çš„å”¯ä¸€æ€§ï¼Œå¹¶è¯¦ç»†è¯´æ˜è¯¥æœºåˆ¶å¯¹ç³»ç»Ÿçš„ä¸šåŠ¡ä»·å€¼ï¼Ÿ", "context": {"file_path": "app\\api\\routes\\users.py", "related_dbr": "DBR-01", "code_snippet": "# æ³¨å†Œæ£€æŸ¥å—\nif await check_username_is_taken(users_repo, user_create.username):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.USERNAME_TAKEN,\n    )\n\nif await check_email_is_taken(users_repo, user_create.email):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.EMAIL_TAKEN,\n    )\n\n# æ›´æ–°æ ¡éªŒå—\nif user_update.username and user_update.username != current_user.username:\n    if await check_username_is_taken(users_repo, user_update.username):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.USERNAME_TAKEN,\n        )\n\nif user_update.email and user_update.email != current_user.email:\n    if await check_email_is_taken(users_repo, user_update.email):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.EMAIL_TAKEN,\n        )"}, "auto_processing": {"parser": "multilingual_evidence_aligned_parser", "dbr_logic": "DBR-01 Trigger: æ³¨å†Œç¯èŠ‚çš„èº«ä»½æ ‡è¯†å†²çªæ‹¦æˆª", "data_cleaning": "Step-placeholder removal, Markdown code normalization"}, "reasoning_trace": ["åˆ†æ `register` å‡½æ•°ï¼šåœ¨ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œä¼šå…ˆé€šè¿‡ `check_username_is_taken` å’Œ `check_email_is_taken` å‡½æ•°æ£€æŸ¥ç”¨æˆ·åå’Œé‚®ç®±æ˜¯å¦å·²è¢«å ç”¨ã€‚å¦‚æœå·²ç»è¢«å ç”¨ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ã€‚", "åˆ†æ `login` å‡½æ•°ï¼šè™½ç„¶ä¸»è¦å…³æ³¨äºç™»å½•æ“ä½œçš„å®‰å…¨æ€§åé¦ˆï¼Œå¹¶ä¸ç›´æ¥æ¶‰åŠå”¯ä¸€æ€§çš„æ ¡éªŒé€»è¾‘ï¼Œä½†åœ¨å°è¯•ä»æ•°æ®åº“è·å–ç”¨æˆ·æ—¶ä¼šæ•æ‰ `EntityDoesNotExist` é”™è¯¯ã€‚", "åˆ†æ `update_current_user` å‡½æ•°ï¼šåœ¨æ›´æ–°å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åæˆ–é‚®ç®±æ—¶ï¼Œä¹Ÿä¼šå¯¹æ–°å€¼è¿›è¡Œæ£€æŸ¥ä»¥ç¡®ä¿å…¶æœªè¢«å…¶ä»–è´¦æˆ·å ç”¨ã€‚", "é€šè¿‡è¿™äº›æœºåˆ¶çš„å®æ–½ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿçš„ä¸šåŠ¡ä»·å€¼ã€‚å…·ä½“åŒ…æ‹¬ï¼š", "- **æé«˜æ•°æ®ä¸€è‡´æ€§**ï¼šå”¯ä¸€æ€§çš„ä¿è¯æœ‰åŠ©äºç»´æŠ¤æ•°æ®åº“ä¸­çš„æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚", "- **å¢å¼ºç”¨æˆ·ä½“éªŒ**ï¼šåœ¨æ³¨å†Œæˆ–æ›´æ–°ä¿¡æ¯æ—¶æä¾›å³æ—¶åé¦ˆï¼Œé¿å…é‡å¤æäº¤ç›¸åŒçš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå‡å°‘ç”¨æˆ·å› é”™è¯¯è€Œäº§ç”Ÿçš„æŒ«è´¥æ„Ÿã€‚", "- **æ”¯æŒä¸šåŠ¡éœ€æ±‚**ï¼šç¡®ä¿ç”¨æˆ·åå’Œé‚®ç®±çš„å”¯ä¸€æ€§æ˜¯è®¸å¤šåœ¨çº¿æœåŠ¡çš„åŸºæœ¬è¦æ±‚ä¹‹ä¸€ï¼Œè¿™å¯¹äºç¤¾äº¤ç½‘ç»œã€ç”µå­å•†åŠ¡å¹³å°ç­‰å°¤ä¸ºå…³é”®ã€‚"], "answer": "### ğŸ’¡ æ¨ç†é“¾ä¸åˆè§„é€»è¾‘\n- åˆ†æ `register` å‡½æ•°ï¼šåœ¨ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œä¼šå…ˆé€šè¿‡ `check_username_is_taken` å’Œ `check_email_is_taken` å‡½æ•°æ£€æŸ¥ç”¨æˆ·åå’Œé‚®ç®±æ˜¯å¦å·²è¢«å ç”¨ã€‚å¦‚æœå·²ç»è¢«å ç”¨ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯ã€‚\n- åˆ†æ `login` å‡½æ•°ï¼šè™½ç„¶ä¸»è¦å…³æ³¨äºç™»å½•æ“ä½œçš„å®‰å…¨æ€§åé¦ˆï¼Œå¹¶ä¸ç›´æ¥æ¶‰åŠå”¯ä¸€æ€§çš„æ ¡éªŒé€»è¾‘ï¼Œä½†åœ¨å°è¯•ä»æ•°æ®åº“è·å–ç”¨æˆ·æ—¶ä¼šæ•æ‰ `EntityDoesNotExist` é”™è¯¯ã€‚\n- åˆ†æ `update_current_user` å‡½æ•°ï¼šåœ¨æ›´æ–°å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åæˆ–é‚®ç®±æ—¶ï¼Œä¹Ÿä¼šå¯¹æ–°å€¼è¿›è¡Œæ£€æŸ¥ä»¥ç¡®ä¿å…¶æœªè¢«å…¶ä»–è´¦æˆ·å ç”¨ã€‚\n- é€šè¿‡è¿™äº›æœºåˆ¶çš„å®æ–½ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿçš„ä¸šåŠ¡ä»·å€¼ã€‚å…·ä½“åŒ…æ‹¬ï¼š\n- - **æé«˜æ•°æ®ä¸€è‡´æ€§**ï¼šå”¯ä¸€æ€§çš„ä¿è¯æœ‰åŠ©äºç»´æŠ¤æ•°æ®åº“ä¸­çš„æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚\n- - **å¢å¼ºç”¨æˆ·ä½“éªŒ**ï¼šåœ¨æ³¨å†Œæˆ–æ›´æ–°ä¿¡æ¯æ—¶æä¾›å³æ—¶åé¦ˆï¼Œé¿å…é‡å¤æäº¤ç›¸åŒçš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå‡å°‘ç”¨æˆ·å› é”™è¯¯è€Œäº§ç”Ÿçš„æŒ«è´¥æ„Ÿã€‚\n- - **æ”¯æŒä¸šåŠ¡éœ€æ±‚**ï¼šç¡®ä¿ç”¨æˆ·åå’Œé‚®ç®±çš„å”¯ä¸€æ€§æ˜¯è®¸å¤šåœ¨çº¿æœåŠ¡çš„åŸºæœ¬è¦æ±‚ä¹‹ä¸€ï¼Œè¿™å¯¹äºç¤¾äº¤ç½‘ç»œã€ç”µå­å•†åŠ¡å¹³å°ç­‰å°¤ä¸ºå…³é”®ã€‚\n\n### ğŸ“ ä¸šåŠ¡æ–¹æ¡ˆè§£ç­”\nç¡®ä¿ç”¨æˆ·æ³¨å†Œã€ç™»å½•åŠæ›´æ–°æ“ä½œä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±å”¯ä¸€æ€§æ˜¯ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§å’Œæå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®æªæ–½ã€‚é€šè¿‡åœ¨ `register` å’Œ `update_current_user` å‡½æ•°ä¸­å¯¹ç”¨æˆ·åå’Œé‚®ç®±è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥åœ¨ç”¨æˆ·å°è¯•æ³¨å†Œæˆ–æ›´æ”¹å…¶è´¦æˆ·ä¿¡æ¯æ—¶ç«‹å³åé¦ˆé”™è¯¯ã€‚è¿™ç§æœºåˆ¶ä¸ä»…æœ‰åŠ©äºé¿å…å†²çªå’Œé‡å¤ï¼Œè¿˜èƒ½ç¡®ä¿æ¯ä¸ªè´¦æˆ·çš„ç”¨æˆ·åå’Œé‚®ç®±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä»è€Œå¢å¼ºç”¨æˆ·çš„ä¿¡ä»»æ„Ÿå’Œæ»¡æ„åº¦ã€‚\n\nä»æ›´å¹¿æ³›çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€æªæ–½è¿˜æ”¯æŒäº†ä¸šåŠ¡éœ€æ±‚çš„å®ç°ï¼šæ— è®ºæ˜¯ä¸ºäº†éµå®ˆè¡Œä¸šæ ‡å‡†è¿˜æ˜¯æ»¡è¶³ç‰¹å®šåŠŸèƒ½çš„è¦æ±‚ï¼ˆä¾‹å¦‚ç¤¾äº¤ç½‘ç»œæˆ–ç”µå­é‚®ä»¶æœåŠ¡ï¼‰ï¼Œå”¯ä¸€æ€§çš„ä¿è¯éƒ½æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªæ›´åŠ å¯é å’Œé«˜æ•ˆçš„æœåŠ¡å¹³å°ã€‚\n\n### ğŸ’» æ ¸å¿ƒæºä»£ç å®ç°\n```python\n# æ³¨å†Œæ£€æŸ¥å—\nif await check_username_is_taken(users_repo, user_create.username):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.USERNAME_TAKEN,\n    )\n\nif await check_email_is_taken(users_repo, user_create.email):\n    raise HTTPException(\n        status_code=HTTP_400_BAD_REQUEST,\n        detail=strings.EMAIL_TAKEN,\n    )\n\n# æ›´æ–°æ ¡éªŒå—\nif user_update.username and user_update.username != current_user.username:\n    if await check_username_is_taken(users_repo, user_update.username):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.USERNAME_TAKEN,\n        )\n\nif user_update.email and user_update.email != current_user.email:\n    if await check_email_is_taken(users_repo, user_update.email):\n        raise HTTPException(\n            status_code=HTTP_400_BAD_REQUEST,\n            detail=strings.EMAIL_TAKEN,\n        )\n```", "data_quality": {"consistency_check": true, "language": "zh-cn", "temperature": 0.7}}
